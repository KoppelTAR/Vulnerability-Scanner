const axios = require('axios');
const https = require('https');

const agent = new https.Agent({
    rejectUnauthorized: false
});



exports.getWebsite = async (req, res) => {
    try {
        const resp = await axios.get(req.query.url, {timeout: 3000, httpsAgent: agent});
        return res.status(resp.status).send(console.log(resp.status))
    } catch (error) {
        if (error.code != "ENOTFOUND") {
            return res.status(error.response.status).send(console.log(error.response.status))
        } else {
            return res.status(500).send(console.log("Something went wrong with the request."))
        }
    }
    
}

exports.getPHPInfo = async (req, res) => {
    try {
        const resp = await axios.get(req.query.url + "/phpinfo.php", {timeout: 3000, httpsAgent: agent});
        return res.status(resp.status).send(console.log(resp.status))
    } catch (error) {
        return res.status(error.response.status).send(console.log(error.response.status))
    }
    
}

exports.getGitConfig = async (req, res) => {
    try {
        const resp = await axios.get(req.query.url + "/.git/config", {timeout: 3000, httpsAgent: agent});
        return res.status(resp.status).send(console.log(resp.status))
    } catch (error) {
        return res.status(error.response.status).send(console.log(error.response.status))
    }
    
}